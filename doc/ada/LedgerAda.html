<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: LedgerAda</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: LedgerAda</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>LedgerAda<span class="signature">()</span><span class="type-signature"></span></h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    

    
    <h4 class="name" id="LedgerAda"><span class="type-signature"></span>new LedgerAda<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Class uses the underlying Ledger comms layer to communicate with the Cardano Ledger App.</p>
<p>All methods return a result object containing a <code>success</code> boolean.</p>
<h3>ADA APDU I/O Buffer Structure</h3><h4>Header</h4><ul>
<li>buffer[0] = APDU IDENTIFIER</li>
<li>buffer[1] = INSTRUCITON NO</li>
<li>buffer[2] = P1 VALUE</li>
<li>buffer[3] = P2 VALUE</li>
<li>buffer[4..7] = CDATA_LENGTH</li>
</ul>
<h4>Data</h4><ul>
<li>buffer[...] = DATA</li>
<li>buffer[END] = 0x9000 OKAY</li>
</ul>
</div>













<dl class="details">

    
    <dt class="tag-version">Version:</dt>
    <dd class="tag-version"><ul class="dummy"><li>0.1.0</li></ul></dd>
    

    

    

    

    

    

    

    

    
    <dt class="tag-author">Author:</dt>
    <dd class="tag-author">
        <ul>
            <li>StaceC - HiddenField Ltd</li>
        </ul>
    </dd>
    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ledger-ada.js.html">ledger-ada.js</a>, <a href="ledger-ada.js.html#line22">line 22</a>
    </li></ul></dd>
    

    

    

    
</dl>

















    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const ada = new ledger.ada(comm);</code></pre>



    
    </div>

    

    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="getWalletPublicKeyWithIndex"><span class="type-signature"></span>getWalletPublicKeyWithIndex<span class="signature">(index)</span><span class="type-signature"> &rarr; {Promise.&lt;{success:boolean, publicKey:string}>}</span></h4>
    

    



<div class="description">
    <p>Get a public key from the specified BIP 32 index.
The BIP 32 index is from the path at <code>44'/1815'/0'/[index]</code>.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>index</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"><p>The index to retrieve.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ledger-ada.js.html">ledger-ada.js</a>, <a href="ledger-ada.js.html#line117">line 117</a>
    </li></ul></dd>
    

    

    

    
</dl>











<h5>Throws:</h5>
<ul>
        <li>

    <div class="param-desc">
    
        <p>5201 - Non-hardened index passed in, Index &lt; 0x80000000</p>
    
    </div>

</li>
    
        <li>

    <div class="param-desc">
    
        <p>5202 - Invalid header</p>
    
    </div>

</li>
    
        <li>

    <div class="param-desc">
    
        <p>5003 - Index not a number</p>
    
    </div>

</li>
    </ul>


<h5>Returns:</h5>

        
<div class="param-desc">
    <p>The public key for the given index.</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;{success:boolean, publicKey:string}></span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>ada.getWalletPublicKeyWithIndex(0xC001CODE)
 .then((response) => {
   console.log(response.publicKey);
 })
 .catch(error => console.log(error));</code></pre>



        
            

    

    
    <h4 class="name" id="getWalletRecoveryPassphrase"><span class="type-signature"></span>getWalletRecoveryPassphrase<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;{success:boolean, publicKey:string, chainCode:string}>}</span></h4>
    

    



<div class="description">
    <p>Get the root extended public key of the wallet,
also known as the wallet recovery passphrase.
BIP 32 Path M 44' /1815'
32 Byte Public Key
32 Byte Chain Code</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ledger-ada.js.html">ledger-ada.js</a>, <a href="ledger-ada.js.html#line163">line 163</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>The result object containing the root wallet public key and chaincode.</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;{success:boolean, publicKey:string, chainCode:string}></span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>ada.getWalletRecoveryPassphrase()
 .then((response) => {
   console.log(response.publicKey);
   console.log(response.chainCode);
 })
 .catch(error => console.log(error));</code></pre>



        
            

    

    
    <h4 class="name" id="isConnected"><span class="type-signature"></span>isConnected<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;{success:boolean, major:number, minor:number, patch:number}>}</span></h4>
    

    



<div class="description">
    <p>Checks if the device is connected and if so, returns an object
containing the app version.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ledger-ada.js.html">ledger-ada.js</a>, <a href="ledger-ada.js.html#line381">line 381</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Result object containing the application version number.</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;{success:boolean, major:number, minor:number, patch:number}></span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>ada.isConnected()
 .then((response) => {
   const { major, minor, patch } = response;
   console.log('App version %d.%d.%d: ', major, minor, patch);
 })
 .catch(error => console.log(error));</code></pre>



        
            

    

    
    <h4 class="name" id="signTransaction"><span class="type-signature"></span>signTransaction<span class="signature">(txHex, indexes)</span><span class="type-signature"> &rarr; {Array.Promise.&lt;{success:boolean, digest:string}>}</span></h4>
    

    



<div class="description">
    <p>Signs a hex encoded transaction with the given indexes.
The transaction is hased using Blake2b on the Ledger device.
Then, signed by the private key derived from each of the passed in indexes at
path 44'/1815'/0'/[index].</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>txHex</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The transaction to be signed.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>indexes</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;number></span>


            
            </td>

            

            

            <td class="description last"><p>The indexes of the keys to be used for signing.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="ledger-ada.js.html">ledger-ada.js</a>, <a href="ledger-ada.js.html#line360">line 360</a>
    </li></ul></dd>
    

    

    

    
</dl>











<h5>Throws:</h5>
<ul>
        <li>

    <div class="param-desc">
    
        <p>5001 - Tx &gt; 1024 bytes</p>
    
    </div>

</li>
    
        <li>

    <div class="param-desc">
    
        <p>5301 - Index &lt; 0x80000000</p>
    
    </div>

</li>
    
        <li>

    <div class="param-desc">
    
        <p>5302 - Index &gt; 0xFFFFFFFF</p>
    
    </div>

</li>
    
        <li>

    <div class="param-desc">
    
        <p>5003 - Index not a number</p>
    
    </div>

</li>
    </ul>


<h5>Returns:</h5>

        
<div class="param-desc">
    <p>An array of result objects containing a digest for each of the passed in indexes.</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.Promise.&lt;{success:boolean, digest:string}></span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const transaction = '839F8200D8185826825820E981442C2BE40475BB42193CA35907861D90715854DE6FCBA767B98F1789B51219439AFF9F8282D818584A83581CE7FE8E468D2249F18CD7BF9AEC0D4374B7D3E18609EDE8589F82F7F0A20058208200581C240596B9B63FC010C06FBE92CF6F820587406534795958C411E662DC014443C0688E001A6768CC861B0037699E3EA6D064FFA0';
ada.signTransaction(transaction, [0xF005BA11])
 .then((response) => {
   console.log('Signed successfully: %s', response.digest);
 })
 .catch(error => console.log(error));</code></pre>



        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="LedgerAda.html">LedgerAda</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Wed Feb 28 2018 17:50:13 GMT+0000 (GMT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>